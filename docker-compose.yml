version: "3"

services:
  db:
    build: MariaDB/
    environment:
      - MARIADB_WP_USER=wordpress
      - MARIADB_WP_PASSWORD=wordpress
      - MARIADB_ADMIN_USER=pouet
      - MARIADB_ADMIN_PASSWORD=pouet
    # ports:
    #   - 3306:3306
    volumes:
      #- /home/med/dev/42/inception-volumes/mariadb:/var/lib/mysql
      - ./mariadb_volume:/var/lib/mysql

  nginx:
    build: Nginx/
    ports:
      - 443:443
    volumes:
      - ./wordpress_volume:/var/www/localhost/htdocs/
    depends_on:
      - wordpress


  adminer:
    image: adminer
    restart: always
    ports:
      - 8090:8080

  wordpress:
    build: Wordpress/
    environment:
      - WORDPRESS_DB_HOST=db
      - WORDPRESS_DB_USER=wordpress
      - WORDPRESS_DB_PASSWORD=wordpress
      - WORDPRESS_DB_NAME=wp_db
    volumes:
      - ./wordpress_volume:/var/www/html
    depends_on:
      - db

  # wordpress_container:
  #   build: Wordpress/
  #   environment:
  #     - WORDPRESS_DB_HOST=db
  #     - WORDPRESS_DB_USER=wordpress
  #     - WORDPRESS_DB_PASSWORD=wordpress
  #     - WORDPRESS_DB_NAME=wp_db
  #   ports:
  #     - 8090:80

#    networks:
#      - web

# Host-mounted volume: /host/path:/container/path (Binded to the host given path)
# Named volume: named_volume_name:/container/path (Data persists after removing container, accessible by other containers, created in /var/lib/docker/volumes on host)
# Anonymous volume: /container/path/only (After container is removed, data is erased, volume cannot be accessed by another container)

#networks:
#  web: