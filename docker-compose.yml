version: "3.9"

services:
  db:
    build: MariaDB/
    environment:
      - MARIADB_USER=wordpress
      - MARIADB_PASSWORD=wordpress
    # ports:
    #   - 3306:3306
    volumes:
      #- /home/med/dev/42/inception-volumes/mariadb:/var/lib/mysql
      - ./mariadb_volume:/var/lib/mysql

  nginx:
    build: Nginx/
    ports:
      - 8080:80
    volumes:
      - ./wordpress_volume:/var/www/localhost/htdocs/

  wordpress:
    image: wordpress:php7.3-fpm-alpine
    environment:
      - WORDPRESS_DB_HOST=db
      - WORDPRESS_DB_USER=wordpress
      - WORDPRESS_DB_PASSWORD=wordpress
      - WORDPRESS_DB_NAME=wp_db

  # wordpress_container:
  #   build: Wordpress/
  #   environment:
  #     - WORDPRESS_DB_HOST=db
  #     - WORDPRESS_DB_USER=wordpress
  #     - WORDPRESS_DB_PASSWORD=wordpress
  #     - WORDPRESS_DB_NAME=wp_db
  #   ports:
  #     - 8090:80

#    networks:
#      - web

# Host-mounted volume: /host/path:/container/path (Binded to the host given path)
# Named volume: named_volume_name:/container/path (Data persists after removing container, accessible by other containers, created in /var/lib/docker/volumes on host)
# Anonymous volume: /container/path/only (After container is removed, data is erased, volume cannot be accessed by another container)

#networks:
#  web: